# 6.年休詳細

## RESTful API エンドポイント

### ベースURL
```
/api/v1/annual-leave-details
```

### エンドポイント一覧

| HTTP Method | エンドポイント | 概要 | 認可 |
| :-- | :-- | :-- | :-- |
| GET | `/api/v1/annual-leave-details` | 年休詳細情報の一覧を取得 | TBD |
| GET | `/api/v1/annual-leave-details/{id}` | 年休詳細情報を1件取得 | TBD |
| POST | `/api/v1/annual-leave-details` | 年休詳細情報を登録 | TBD |
| PUT | `/api/v1/annual-leave-details/{id}` | 年休詳細情報を更新 | TBD |
| DELETE | `/api/v1/annual-leave-details/{id}` | 年休詳細情報を削除 | TBD |

---

## エンドポイント詳細

### 1. 一覧取得
**GET** `/api/v1/annual-leave-details`

#### クエリパラメータ
| パラメータ名 | 型 | 必須 | 備考 |
| :-- | :-- | :-- |:-- |
| employee_code | String | | 社員コード (T_年休詳細.社員コード) - 完全一致検索 |
| leave_date_s | String | | 取得日開始 (T_年休詳細.取得日 >= leave_date_s) - YYYYMMDD形式 |
| leave_date_e | String | | 取得日終了 (T_年休詳細.取得日 <= leave_date_e) - YYYYMMDD形式 |
| leave_days_s | Decimal | | 日数開始値 (T_年休詳細.日数 >= leave_days_s) |
| leave_days_e | Decimal | | 日数終了値 (T_年休詳細.日数 <= leave_days_e) |
| count_s | Int | | カウント開始値 (T_年休詳細.カウント >= count_s) |
| count_e | Int | | カウント終了値 (T_年休詳細.カウント <= count_e) |
| page | Int | ○ | ページ番号 |
| size | Int | ○ | ページサイズ |

#### レスポンス
```json
{
  "content": [
    {
      "id": 1,
      "employee_code": "EMP001",
      "leave_date": "20240101",
      "leave_days": 1.0,
      "count": 1
    }
  ],
  "totalElements": 100,
  "totalPages": 10,
  "currentPage": 1
}
```

### 2. 単体取得
**GET** `/api/v1/annual-leave-details/{id}`

#### パスパラメータ
| パラメータ名 | 型 | 必須 | 備考 |
| :-- | :-- | :-- |:-- |
| id | Int | ○ | ID (T_年休詳細.ID) |

#### レスポンス
```json
{
  "id": 1,
  "employee_code": "EMP001",
  "leave_date": "20240101",
  "leave_days": 1.0,
  "count": 1
}
```

### 3. 登録
**POST** `/api/v1/annual-leave-details`

#### リクエストボディ
```json
{
  "employee_code": "EMP001",
  "leave_date": "20240101",
  "leave_days": 1.0,
  "count": 1
}
```

#### レスポンス
```json
{
  "id": 1,
  "employee_code": "EMP001",
  "leave_date": "20240101",
  "leave_days": 1.0,
  "count": 1
}
```

### 4. 更新
**PUT** `/api/v1/annual-leave-details/{id}`

#### パスパラメータ
| パラメータ名 | 型 | 必須 | 備考 |
| :-- | :-- | :-- |:-- |
| id | Int | ○ | ID (T_年休詳細.ID) |

#### リクエストボディ
```json
{
  "employee_code": "EMP001",
  "leave_date": "20240101",
  "leave_days": 1.0,
  "count": 1
}
```

#### レスポンス
```json
{
  "id": 1,
  "employee_code": "EMP001",
  "leave_date": "20240101",
  "leave_days": 1.0,
  "count": 1
}
```

### 5. 削除
**DELETE** `/api/v1/annual-leave-details/{id}`

#### パスパラメータ
| パラメータ名 | 型 | 必須 | 備考 |
| :-- | :-- | :-- |:-- |
| id | Int | ○ | ID (T_年休詳細.ID) |

#### レスポンス
```json
{
  "success": true
}
```

---

## データモデル

### AnnualLeaveDetail
| フィールド名 | 型 | 補足 |
| :-- | :-- | :-- |
| id | Int | ID (T_年休詳細.ID) - Primary Key |
| employee_code | String | 社員コード (T_年休詳細.社員コード) - Foreign Key |
| leave_date | String | 取得日 (T_年休詳細.取得日) |
| leave_days | Decimal | 日数 (T_年休詳細.日数) |
| count | Int | カウント (T_年休詳細.カウント) |

### AnnualLeaveDetailPage
| フィールド名 | 型 | 補足 |
| :-- | :-- | :-- |
| content | [AnnualLeaveDetail] | 年休詳細リスト |
| totalElements | int | 総件数 |
| totalPages | int | 総ページ数 |
| currentPage | int | 現在ページ番号 |

---

## エラーレスポンス

### 400 Bad Request
```json
{
  "error": "Bad Request",
  "message": "Invalid request parameters",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### 404 Not Found
```json
{
  "error": "Not Found",
  "message": "Annual leave detail not found",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### 500 Internal Server Error
```json
{
  "error": "Internal Server Error",
  "message": "An unexpected error occurred",
  "timestamp": "2024-01-01T00:00:00Z"
}
```
