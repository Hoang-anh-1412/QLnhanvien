# RESTful API Design Guide
**Version:** v0.1  
**Last Updated:** 2025-10-25  
**Author:** Chinh  
**Reviewer:** [PM/Leader Name]  
**System:** HR Management System  

---

## Overview
This document outlines the RESTful API design principles and standards used across the Employee Management System.

## RESTful API Principles

### 1. Resource-Based URLs
- Use nouns, not verbs in URLs
- Use plural nouns for collections
- Use hierarchical structure for related resources

**Examples:**
```
✅ Good:
GET /api/v1/employees
GET /api/v1/employees/{id}
GET /api/v1/employees/{id}/qualifications
GET /api/v1/departments/{id}/employees

❌ Bad:
GET /api/v1/getEmployees
GET /api/v1/employee/{id}/getQualifications
```

### 2. HTTP Methods
Use appropriate HTTP methods for different operations:

| Method | Purpose | Example |
|--------|---------|---------|
| GET | Retrieve resource(s) | `GET /api/v1/employees` |
| POST | Create new resource | `POST /api/v1/employees` |
| PUT | Update entire resource | `PUT /api/v1/employees/{id}` |
| PATCH | Partial update | `PATCH /api/v1/employees/{id}` |
| DELETE | Delete resource | `DELETE /api/v1/employees/{id}` |

### 3. HTTP Status Codes
Use appropriate HTTP status codes:

| Code | Meaning | Usage |
|------|---------|-------|
| 200 | OK | Successful GET, PUT, PATCH |
| 201 | Created | Successful POST |
| 204 | No Content | Successful DELETE |
| 400 | Bad Request | Invalid request data |
| 401 | Unauthorized | Missing or invalid authentication |
| 403 | Forbidden | Valid auth but insufficient permissions |
| 404 | Not Found | Resource not found |
| 409 | Conflict | Resource already exists |
| 422 | Unprocessable Entity | Validation errors |
| 500 | Internal Server Error | Server error |

### 4. Request/Response Format

#### Request Headers
```
Content-Type: application/json
Authorization: Bearer {token}
Accept: application/json
```

#### Response Format
```json
{
  "success": true,
  "data": { ... },
  "message": "Operation completed successfully",
  "pagination": {
    "page": 1,
    "size": 20,
    "totalElements": 100,
    "totalPages": 5
  }
}
```

#### Error Response Format
```json
{
  "success": false,
  "error": "VALIDATION_ERROR",
  "message": "Invalid input data",
  "details": [
    {
      "field": "email",
      "message": "Email is required"
    }
  ]
}
```

### 5. Query Parameters
Use query parameters for filtering, sorting, and pagination:

```
GET /api/v1/employees?page=1&size=20&sort=name,asc&department=IT
GET /api/v1/employees?search=john&isActive=true
GET /api/v1/qualifications?type=technical&year=2024
```

### 6. Pagination
Implement consistent pagination across all list endpoints:

```json
{
  "data": [...],
  "pagination": {
    "page": 1,
    "size": 20,
    "totalElements": 100,
    "totalPages": 5,
    "hasNext": true,
    "hasPrevious": false
  }
}
```

### 7. Filtering and Searching
Support filtering and searching with query parameters:

```
# Filter by department
GET /api/v1/employees?department=IT

# Search by name
GET /api/v1/employees?search=john

# Multiple filters
GET /api/v1/employees?department=IT&isActive=true&hireDate=2024-01-01

# Date range filtering
GET /api/v1/employees?hireDateFrom=2024-01-01&hireDateTo=2024-12-31
```

### 8. Sorting
Support sorting with `sort` parameter:

```
# Single field sorting
GET /api/v1/employees?sort=name

# Multiple field sorting
GET /api/v1/employees?sort=department,name

# Descending order
GET /api/v1/employees?sort=name,desc
```

### 9. API Versioning
Use URL versioning for API versions:

```
/api/v1/employees
/api/v2/employees
```

### 10. Authentication
Use Bearer Token authentication:

```
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 11. Rate Limiting
Implement rate limiting with headers:

```
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1640995200
```

### 12. Caching
Use appropriate cache headers:

```
Cache-Control: public, max-age=3600
ETag: "1234567890"
Last-Modified: Wed, 21 Oct 2024 07:28:00 GMT
```

## API Endpoints Structure

### Employee Management
```
GET    /api/v1/employees              # List employees
POST   /api/v1/employees              # Create employee
GET    /api/v1/employees/{id}         # Get employee
PUT    /api/v1/employees/{id}         # Update employee
PATCH  /api/v1/employees/{id}         # Partial update
DELETE /api/v1/employees/{id}         # Delete employee
```

### Department Management
```
GET    /api/v1/departments            # List departments
POST   /api/v1/departments            # Create department
GET    /api/v1/departments/{id}       # Get department
PUT    /api/v1/departments/{id}       # Update department
DELETE /api/v1/departments/{id}       # Delete department
```

### Qualification Management
```
GET    /api/v1/qualifications         # List qualifications
POST   /api/v1/qualifications         # Create qualification
GET    /api/v1/qualifications/{id}    # Get qualification
PUT    /api/v1/qualifications/{id}    # Update qualification
DELETE /api/v1/qualifications/{id}    # Delete qualification
```

### Annual Leave Management
```
GET    /api/v1/annual-leaves          # List annual leaves
POST   /api/v1/annual-leaves          # Create annual leave
GET    /api/v1/annual-leaves/{id}     # Get annual leave
PUT    /api/v1/annual-leaves/{id}     # Update annual leave
DELETE /api/v1/annual-leaves/{id}     # Delete annual leave
```

### Welding License Management
```
GET    /api/v1/welding-licenses       # List welding licenses
POST   /api/v1/welding-licenses       # Create welding license
GET    /api/v1/welding-licenses/{id}  # Get welding license
PUT    /api/v1/welding-licenses/{id}  # Update welding license
DELETE /api/v1/welding-licenses/{id}  # Delete welding license
```

## Best Practices

### 1. Consistent Naming
- Use camelCase for JSON properties
- Use kebab-case for URLs
- Use descriptive names

### 2. Error Handling
- Always return appropriate HTTP status codes
- Provide meaningful error messages
- Include field-level validation errors

### 3. Documentation
- Document all endpoints
- Provide request/response examples
- Include error scenarios

### 4. Security
- Validate all input data
- Use HTTPS in production
- Implement proper authentication
- Sanitize user input

### 5. Performance
- Implement pagination for large datasets
- Use appropriate HTTP caching
- Optimize database queries
- Consider API rate limiting

## Example Implementation

### Complete CRUD Example
```javascript
// Create Employee
POST /api/v1/employees
{
  "employeeCode": "EMP001",
  "fullName": "John Doe",
  "department": "IT",
  "hireDate": "2024-01-15"
}

// Response
{
  "success": true,
  "data": {
    "id": 1,
    "employeeCode": "EMP001",
    "fullName": "John Doe",
    "department": "IT",
    "hireDate": "2024-01-15",
    "createdAt": "2024-01-15T10:30:00Z"
  },
  "message": "Employee created successfully"
}

// Get Employee
GET /api/v1/employees/1

// Update Employee
PUT /api/v1/employees/1
{
  "employeeCode": "EMP001",
  "fullName": "John Smith",
  "department": "IT",
  "hireDate": "2024-01-15"
}

// Delete Employee
DELETE /api/v1/employees/1
```

---

*This guide ensures consistent RESTful API design across the Employee Management System*
