# 1. Supervising Department API
**Version:** v0.1  
**Last Updated:** 2025-10-25  
**Author:** Chinh  
**Reviewer:** [PM/Leader Name]  
**System:** HR Management System  

---

## Overview
API for managing supervising department data (T_統括部門). Provides hierarchical department management functionality.

## Base URL
`/api/v1/divisions`

## Authentication
Bearer Token required for all endpoints

## Data Models

### Supervising Department Entity
```json
{
  "divisionId": "number",        // Division ID (Primary Key)
  "divisionName": "string",      // Division Name
  "field1": "string"             // Field 1
}
```

## Endpoints

### 1. Get All Supervising Departments
**GET** `/api/v1/divisions`

#### Query Parameters
- `divisionName` (optional): Division name (fuzzy search)
- `page` (optional): Page number (default: 1)
- `size` (optional): Page size (default: 20)

#### Response
```json
{
  "content": [
    {
      "divisionId": 1,
      "divisionName": "Sales Division",
      "field1": "Sales related"
    },
    {
      "divisionId": 2,
      "divisionName": "Technical Division",
      "field1": "Technical related"
    }
  ],
  "totalElements": 100,
  "totalPages": 10,
  "currentPage": 1
}
```

### 2. Get Supervising Department by ID
**GET** `/api/v1/divisions/{divisionId}`

#### Path Parameters
- `divisionId`: Division ID

#### Response
```json
{
  "divisionId": 1,
  "divisionName": "Sales Division",
  "field1": "Sales related"
}
```

### 3. Create Supervising Department
**POST** `/api/v1/divisions`

#### Request Body
```json
{
  "divisionName": "HR Division",
  "field1": "HR related"
}
```

#### Response
```json
{
  "divisionId": 3,
  "divisionName": "HR Division",
  "field1": "HR related"
}
```

### 4. Update Supervising Department
**PUT** `/api/v1/divisions/{divisionId}`

#### Path Parameters
- `divisionId`: Division ID

#### Request Body
```json
{
  "divisionName": "Sales Planning Division",
  "field1": "Sales planning related"
}
```

#### Response
```json
{
  "divisionId": 1,
  "divisionName": "Sales Planning Division",
  "field1": "Sales planning related"
}
```

### 5. Delete Supervising Department
**DELETE** `/api/v1/divisions/{divisionId}`

#### Path Parameters
- `divisionId`: Division ID

#### Response
```json
{
  "success": true
}
```

## Error Responses

### 400 Bad Request
```json
{
  "error": "Bad Request",
  "message": "Invalid request parameters",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### 404 Not Found
```json
{
  "error": "Not Found",
  "message": "Division not found",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### 500 Internal Server Error
```json
{
  "error": "Internal Server Error",
  "message": "An unexpected error occurred",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

## Business Rules

1. **Division ID**: Must be unique across all supervising departments
2. **Name Validation**: Division name cannot be empty
3. **Cascade Delete**: Deleting a supervising department should handle related departments

## Database Constraints

- Primary Key: `部門ID`
- Unique constraints for division IDs
- Check constraints for name validations

## Usage Examples

### Get all supervising departments
```bash
curl -X GET "https://api.company.com/api/v1/divisions" \
  -H "Authorization: Bearer your-token"
```

### Create a new supervising department
```bash
curl -X POST "https://api.company.com/api/v1/divisions" \
  -H "Authorization: Bearer your-token" \
  -H "Content-Type: application/json" \
  -d '{
    "divisionName": "Marketing Division",
    "field1": "Marketing related"
  }'
```

---

*This API documentation is part of the Employee Management System*
