# 1. API Bộ Phận Quản Lý
**Phiên bản:** v0.1  
**Ngày cập nhật:** 2025-10-25  
**Người biên soạn:** Chính  
**Người kiểm duyệt:** [PM/Leader Name]  
**Hệ thống:** Quản lý Nhân sự  

---

## Tổng quan
API quản lý dữ liệu bộ phận quản lý cấp cao (T_統括部門). Cung cấp chức năng quản lý bộ phận quản lý theo cấp bậc.

## URL cơ sở
`/api/v1/divisions`

## Xác thực
Tất cả các endpoint đều yêu cầu Bearer Token

## Mô hình dữ liệu

### Thực thể Bộ phận quản lý cấp cao
```json
{
  "divisionId": "number",        // ID bộ phận (Khóa chính)
  "divisionName": "string",      // Tên bộ phận quản lý
  "field1": "string"             // Trường 1
}
```

## Các endpoint

### 1. Lấy tất cả bộ phận quản lý cấp cao
**GET** `/api/v1/divisions`

#### Tham số truy vấn
- `divisionName` (tùy chọn): Tên bộ phận quản lý (tìm kiếm mờ)
- `page` (tùy chọn): Số trang (mặc định: 1)
- `size` (tùy chọn): Kích thước trang (mặc định: 20)

#### Phản hồi
```json
{
  "content": [
    {
      "divisionId": 1,
      "divisionName": "Bộ phận kinh doanh",
      "field1": "Liên quan kinh doanh"
    },
    {
      "divisionId": 2,
      "divisionName": "Bộ phận kỹ thuật",
      "field1": "Liên quan kỹ thuật"
    }
  ],
  "totalElements": 100,
  "totalPages": 10,
  "currentPage": 1
}
```

### 2. Lấy bộ phận quản lý theo ID
**GET** `/api/v1/divisions/{divisionId}`

#### Tham số đường dẫn
- `divisionId`: ID bộ phận

#### Phản hồi
```json
{
  "divisionId": 1,
  "divisionName": "Bộ phận kinh doanh",
  "field1": "Liên quan kinh doanh"
}
```

### 3. Tạo bộ phận quản lý cấp cao
**POST** `/api/v1/divisions`

#### Nội dung yêu cầu
```json
{
  "divisionName": "Bộ phận nhân sự",
  "field1": "Liên quan nhân sự"
}
```

#### Phản hồi
```json
{
  "divisionId": 3,
  "divisionName": "Bộ phận nhân sự",
  "field1": "Liên quan nhân sự"
}
```

### 4. Cập nhật bộ phận quản lý cấp cao
**PUT** `/api/v1/divisions/{divisionId}`

#### Tham số đường dẫn
- `divisionId`: ID bộ phận

#### Nội dung yêu cầu
```json
{
  "divisionName": "Bộ phận kế hoạch kinh doanh",
  "field1": "Liên quan kế hoạch kinh doanh"
}
```

#### Phản hồi
```json
{
  "divisionId": 1,
  "divisionName": "Bộ phận kế hoạch kinh doanh",
  "field1": "Liên quan kế hoạch kinh doanh"
}
```

### 5. Xóa bộ phận quản lý cấp cao
**DELETE** `/api/v1/divisions/{divisionId}`

#### Tham số đường dẫn
- `divisionId`: ID bộ phận

#### Phản hồi
```json
{
  "success": true
}
```

## Phản hồi lỗi

### 400 Bad Request
```json
{
  "error": "Bad Request",
  "message": "Invalid request parameters",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### 404 Not Found
```json
{
  "error": "Not Found",
  "message": "Division not found",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### 500 Internal Server Error
```json
{
  "error": "Internal Server Error",
  "message": "An unexpected error occurred",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

## Quy tắc nghiệp vụ

1. **ID Bộ phận**: Phải duy nhất trong tất cả các bộ phận quản lý
2. **Xác thực tên**: Tên bộ phận quản lý không được để trống
3. **Xóa liên tục**: Xóa bộ phận quản lý cấp cao phải xử lý các bộ phận liên quan

## Ràng buộc cơ sở dữ liệu

- Khóa chính: `部門ID`
- Ràng buộc duy nhất cho ID bộ phận
- Ràng buộc kiểm tra cho xác thực tên

## Ví dụ sử dụng

### Lấy tất cả bộ phận quản lý
```bash
curl -X GET "https://api.company.com/api/v1/divisions" \
  -H "Authorization: Bearer your-token"
```

### Tạo bộ phận quản lý mới
```bash
curl -X POST "https://api.company.com/api/v1/divisions" \
  -H "Authorization: Bearer your-token" \
  -H "Content-Type: application/json" \
  -d '{
    "divisionName": "Bộ phận marketing",
    "field1": "Liên quan marketing"
  }'
```

---

*Tài liệu API này là một phần của Hệ thống Quản lý Nhân viên*
