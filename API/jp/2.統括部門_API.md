# 1. 統括部門 API
**バージョン:** v0.1  
**最終更新日:** 2025-10-25  
**作成者:** Chinh  
**レビュー担当:** [PM/Leader Name]  
**システム:** 人事管理システム  

---

## 概要
統括部門（T_統括部門）データを管理するAPIです。階層的な部署管理機能を提供します。

## ベースURL
`/api/v1/divisions`

## 認証
すべてのエンドポイントでBearer Tokenが必要です

## データモデル

### 統括部門エンティティ
```json
{
  "divisionId": "number",        // 部門ID (主キー)
  "divisionName": "string",      // 統括部門名
  "field1": "string"             // フィールド1
}
```

## エンドポイント

### 1. 全統括部門取得
**GET** `/api/v1/divisions`

#### クエリパラメータ
- `divisionName` (任意): 統括部門名 (あいまい検索)
- `page` (任意): ページ番号 (デフォルト: 1)
- `size` (任意): ページサイズ (デフォルト: 20)

#### レスポンス
```json
{
  "content": [
    {
      "divisionId": 1,
      "divisionName": "営業部",
      "field1": "営業関連"
    },
    {
      "divisionId": 2,
      "divisionName": "技術部",
      "field1": "技術関連"
    }
  ],
  "totalElements": 100,
  "totalPages": 10,
  "currentPage": 1
}
```

### 2. 統括部門IDで取得
**GET** `/api/v1/divisions/{divisionId}`

#### パスパラメータ
- `divisionId`: 部門ID

#### レスポンス
```json
{
  "divisionId": 1,
  "divisionName": "営業部",
  "field1": "営業関連"
}
```

### 3. 統括部門作成
**POST** `/api/v1/divisions`

#### リクエストボディ
```json
{
  "divisionName": "人事部",
  "field1": "人事関連"
}
```

#### レスポンス
```json
{
  "divisionId": 3,
  "divisionName": "人事部",
  "field1": "人事関連"
}
```

### 4. 統括部門更新
**PUT** `/api/v1/divisions/{divisionId}`

#### パスパラメータ
- `divisionId`: 部門ID

#### リクエストボディ
```json
{
  "divisionName": "営業企画部",
  "field1": "営業企画関連"
}
```

#### レスポンス
```json
{
  "divisionId": 1,
  "divisionName": "営業企画部",
  "field1": "営業企画関連"
}
```

### 5. 統括部門削除
**DELETE** `/api/v1/divisions/{divisionId}`

#### パスパラメータ
- `divisionId`: 部門ID

#### レスポンス
```json
{
  "success": true
}
```

## エラーレスポンス

### 400 Bad Request
```json
{
  "error": "Bad Request",
  "message": "Invalid request parameters",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### 404 Not Found
```json
{
  "error": "Not Found",
  "message": "Division not found",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### 500 Internal Server Error
```json
{
  "error": "Internal Server Error",
  "message": "An unexpected error occurred",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

## ビジネスルール

1. **部門ID**: すべての統括部門間で一意である必要があります
2. **名前検証**: 統括部門名は空にできません
3. **カスケード削除**: 統括部門を削除する際は関連する部署を適切に処理する必要があります

## データベース制約

- 主キー: `部門ID`
- 部門IDの一意制約
- 名前検証のチェック制約

## 使用例

### 全統括部門を取得
```bash
curl -X GET "https://api.company.com/api/v1/divisions" \
  -H "Authorization: Bearer your-token"
```

### 新しい統括部門を作成
```bash
curl -X POST "https://api.company.com/api/v1/divisions" \
  -H "Authorization: Bearer your-token" \
  -H "Content-Type: application/json" \
  -d '{
    "divisionName": "マーケティング部",
    "field1": "マーケティング関連"
  }'
```

---

*このAPIドキュメントは社員管理システムの一部です*
