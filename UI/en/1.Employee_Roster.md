# 1. Employee Roster

## Wireframe
![Employee Roster Screen](社員名簿_UI_画像.png)

## Overview
Screen for displaying and managing employee basic information. Provides search, display, and printing functionality for employee information.

## Endpoint
`/employee/roster`

## API Endpoints
- **Employee Master API**: `/api/v1/employees`
- **Department API**: `/api/v1/departments`
- **Qualification API**: `/api/v1/qualifications`
- **Annual Leave API**: `/api/v1/annual-leaves`

## Screen Background Color
Purple background (#8B5CF6) with white main display area

## Initial Display
### Screen Display
1. Disable the following buttons:
   "Sub-screen Print", "Sub-screen Print (with Address)", "Label Print"
2. Initialize search conditions
   - Supervising Department: Unselected
   - Department Name: Unselected
   - Birth Month: Unselected
   - Age Range: Unselected
   - Wedding Anniversary Month: Unselected
   - Retired Employee Display: Do not display retired employees
3. Address display options
   - Current Address: Checked
   - Family Home: Unchecked
4. Display employee roster area empty

## 1. Supervising Department Dropdown
- **API Call**: `GET /api/v1/departments/divisions`
- Display data retrieved from supervising department master
- Update department name dropdown when selected
- **Response**: Supervising department list

## 2. Department Name Dropdown
- **API Call**: `GET /api/v1/departments/by-division/{divisionId}`
- Display department names linked to selected supervising department
- Display all departments when supervising department is unselected
- **Response**: Department list belonging to selected supervising department

## 3. Birth Month Filter
- Provide options from January to December
- Display only employees born in selected month when selected

## 4. Age Range Filter
- Specify age range (e.g., 25-35 years old)
- Toggle enable/disable with checkbox
- Exclude employees outside the age range

## 5. Wedding Anniversary Month Filter
- Provide options from January to December
- Display only employees with wedding anniversary in selected month when selected

## 6. Retired Employee Display Options
- Do not display retired employees (default selection)
- Also display retired employees
- Only display retired employees

## 7. Clear Button
- Reset all search conditions to initial state
- Return list display to show all records

## 8. Search Execution
- **API Call**: `GET /api/v1/employees`
- **Query Parameters**: 
  - `divisionName`: Supervising department name
  - `departmentName`: Department name
  - `isRetired`: Retirement status
  - `search`: Search by name or employee code
- Retrieve employee list based on set search conditions
- Display basic information of retrieved employees

## 9. Employee Roster Display
### Display Items
- Employee Code
- Name
- Kana Name
- Supervising Department
- Department Name
- Date of Birth
- Age
- Current Address (optional)
- Family Home Address (optional)

### Display Format
- Display in table format
- Scrollable list display
- White display area on purple background

## 10. Address Display Options
### Current Address
- When checked: Display current address
- When unchecked: Hide current address

### Family Home
- When checked: Display family home address
- When unchecked: Hide family home address

## 11. Work Uniform Order
- Navigate to work uniform order screen for selected employee
- Pass employee code

## 12. Qualification Allowance List
- Navigate to qualification allowance master list screen

## 13. Welding License
- Navigate to welding license list screen

## 14. Supervising Department Registration
- Navigate to supervising department registration screen

## 15. Department Name Registration
- Navigate to department name registration screen

## 16. Annual Leave Management
- Navigate to annual leave management screen

## 17. Sub-screen Print
- Print currently displayed list
- Display print confirmation modal

## 18. Sub-screen Print (with Address)
- Print list including address information
- Display print confirmation modal

## 19. Label Print
- Print labels for selected employees
- Employee selection required

## 20. Employee Roster Registration
- Navigate to employee roster registration screen

## 21. Display Extracted Items
- Display count of items extracted with current search conditions
- Example: "Extracted Items: 25"

## 22. Display Selected Items
- Display count of currently selected employees
- Example: "Selected Items: 3"

## 23. Employee Selection
- Select employees from list
- Support multiple selection
- Visual display of selection state

## 24. Print Function
### Print Confirmation Modal
- Display print start confirmation
- Provide print setting options

### Print Output
- Output in PDF format
- Optimize print layout
- Adjust page breaks

## 25. Data Retrieval Process
### Employee List Retrieval
- **API**: `GET /api/v1/employees`
- Retrieve employee data based on search conditions
- Support pagination (`page` and `size` parameters)
- Support sorting (`sort` parameter)

### Annual Leave Information Retrieval
- **API**: `GET /api/v1/employees/{employeeCode}/annual-leave`
- Retrieve employee annual leave details
- Support year filtering with `year` parameter

## 26. Error Handling
### Data Retrieval Error
- Display "Failed to retrieve data" message
- Provide retry option

### Print Error
- Display "Print failed" message
- Prompt to check print settings

## 27. Responsive Design
- Adjust display according to screen size
- Ensure mobile device operability
- Optimize tablet display

## 28. Accessibility
- Support keyboard navigation
- Support screen readers
- Consider color vision deficiency

## 29. Performance Optimization
- Efficient display of large data
- Implement lazy loading
- Utilize caching functionality

## 30. Detailed API Integration

### 30.1. Initial Data Loading Flow
1. **Load supervising department list**
   ```javascript
   GET /api/v1/departments/divisions
   ```
2. **Load filtered employee list**
   ```javascript
   GET /api/v1/employees?page=1&size=20&isRetired=false
   ```

### 30.2. Search/Filter Flow
1. **When supervising department changes**
   ```javascript
   GET /api/v1/departments/by-division/{divisionId}
   ```
2. **When search is executed**
   ```javascript
   GET /api/v1/employees?divisionName={name}&departmentName={name}&search={keyword}
   ```

### 30.3. Print Flow
1. **Retrieve print data**
   ```javascript
   GET /api/v1/employees/{employeeCode}/annual-leave
   ```

### 30.4. API Error Handling
- **400 Bad Request**: Display validation error message
- **404 Not Found**: Display "Data not found"
- **500 Internal Server Error**: Display "System error. Please retry"

### 30.5. Caching Strategy
- Cache supervising department list (low change frequency)
- Cache departments by supervising department
- Cache employee information for 5 minutes

---

*This document is used for development and maintenance of the Employee Management System*
