# 2. Qualification Input
**Version:** v0.1  
**Last Updated:** 2025-01-25  
**Author:** Chinh  
**Reviewer:** [PM/Leader Name]  
**System:** HR Management System  

---

## Overview
Screen for entering new qualification information for employees. Provides functionality to input detailed qualification information and link with employees.

- **Screen Endpoint:** `/qualifications/create`
- **Background Color:** Green (#10B981), white main display area

## Wireframe
```
┌─────────────────────────────────────────────────────────┐
│ 🎓 Qualification Input [Create] [←Back]                 │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ Employee Code: [EMP001 ▼] *Required                │ │
│ │ Qualification Name: [________________] *Required   │ │
│ │ Grade: [Basic ▼] *Required                         │ │
│ │ Type: [National ▼] *Required                      │ │
│ │ Amount: [¥________] *Required                      │ │
│ │ Is Checked: [☑️]                                  │ │
│ │ Certificate Number: [________________] *Required   │ │
│ │ Issue Date: [____/____/____] *Required           │ │
│ │ Qualification Type: [1 ▼] *Required               │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ [💾Save Draft] [✅Register] [❌Cancel]                │
└─────────────────────────────────────────────────────────┘
```

## API Endpoints
| API Name | Endpoint | Purpose |
|----------|----------|---------|
| Create Qualification | `POST /api/v1/qualifications/employees` | Create new qualification |
| Get Employee List | `GET /api/v1/employees` | Get employee list |
| Get Qualification Types | `GET /api/v1/qualifications/allowances` | Get qualification type list |

---

## Initial Display
### Display Mode
| Mode | Parameter | Description |
|:--|:--|:--|
| Create | mode=create | Create mode (all fields editable) |
| Edit | mode=edit&id={id} | Edit mode (load existing data) |
| View | mode=view&id={id} | View mode (all fields read-only) |

### Common Processing
1. Determine mode on screen initialization
2. If edit/view mode: get data by specified ID
3. Set data to form
4. If view mode: set all fields to read-only

---

## Field Descriptions

### 1. Employee Code
| Field | Value |
|:--|:--|
| Label | Employee Code |
| Type | Dropdown |
| Required | ○ |
| Background Color | #FFFFCC (required field) |
| Note | Select employee who owns the qualification |

#### Employee Dropdown
**API:** `GET /api/v1/employees`

##### Request Parameters
```json
{
  "page": 1,
  "size": 1000
}
```

##### Dropdown Display Items
| Display Value | Data Source | Note |
|:--|:--|:--|
| Select Employee | - | Default option |
| Code - Name | employeeCode - fullName | Employee code and name |

#### Validation
- Required check: If not selected display "Employee code is required."

### 2. Qualification Name
| Field | Value |
|:--|:--|
| Label | Qualification Name |
| Type | String |
| Required | ○ |
| Max Length | 100 |
| Background Color | #FFFFCC (required field) |
| Note | Name of the qualification |

#### Validation
- Required check: If empty display "Qualification name is required."
- Length check: If exceeds 100 characters display "Qualification name must not exceed 100 characters."

### 3. Grade
| Field | Value |
|:--|:--|
| Label | Grade |
| Type | Dropdown |
| Required | ○ |
| Background Color | #FFFFCC (required field) |
| Note | Grade of the qualification |

#### Grade Options
- Basic
- Applied  
- Expert

#### Validation
- Required check: If not selected display "Grade is required."

### 4. Type
| Field | Value |
|:--|:--|
| Label | Type |
| Type | Dropdown |
| Required | ○ |
| Background Color | #FFFFCC (required field) |
| Note | Type of qualification |

#### Type Options
- National Certificate
- Private Certificate
- International Certificate

#### Validation
- Required check: If not selected display "Type is required."

### 5. Amount
| Field | Value |
|:--|:--|
| Label | Amount |
| Type | Decimal |
| Required | ○ |
| Background Color | #FFFFCC (required field) |
| Note | Qualification allowance amount |

#### Amount Input Format
- Currency symbol: ¥ (auto-display)
- Thousands separator: Comma (e.g., ¥15,000)
- Decimal places: Integer only
- Input range: 0 < amount ≤ 999,999,999

#### Validation
- Required check: If empty display "Amount is required."
- Number check: If not a number display "Amount must be a number."
- Range check: If ≤ 0 display "Amount must be greater than 0."
- Range check: If > 999,999,999 display "Amount must not exceed 999,999,999."

### 6. Is Checked
| Field | Value |
|:--|:--|
| Label | Is Checked |
| Type | Checkbox |
| Required | |
| Note | Qualification verification status |

### 7. Certificate Number
| Field | Value |
|:--|:--|
| Label | Certificate Number |
| Type | String |
| Required | ○ |
| Max Length | 50 |
| Background Color | #FFFFCC (required field) |
| Note | Certificate serial number |

#### Validation
- Required check: If empty display "Certificate number is required."
- Length check: If exceeds 50 characters display "Certificate number must not exceed 50 characters."
- Duplicate check: If certificate number already exists display "This certificate number is already in use."

### 8. Issue Date
| Field | Value |
|:--|:--|
| Label | Issue Date |
| Type | Date |
| Required | ○ |
| Background Color | #FFFFCC (required field) |
| Note | Qualification issue date |

#### Date Format
- Format: DD/MM/YYYY
- Future dates not allowed

#### Validation
- Required check: If empty display "Issue date is required."
- Date check: If future date display "Issue date cannot be in the future."

### 9. Qualification Type
| Field | Value |
|:--|:--|
| Label | Qualification Type |
| Type | Dropdown |
| Required | ○ |
| Background Color | #FFFFCC (required field) |
| Note | Link to qualification allowance table |

#### Qualification Type Dropdown
**API:** `GET /api/v1/qualifications/allowances`

##### Request Parameters
```json
{
  "page": 1,
  "size": 1000
}
```

##### Dropdown Display Items
| Display Value | Data Source | Note |
|:--|:--|:--|
| Select Qualification Type | - | Default option |
| Name - Type | name - type | Qualification name and type |

#### Validation
- Required check: If not selected display "Qualification type is required."

---

## Draft Save Processing
### Draft Save Button
- Save data without validation
- On save success: Display "Draft saved." message
- On save failure: Display error message

### Draft Save API
**API:** `POST /api/v1/qualifications/employees`

#### When Creating New
```json
{
  "employeeCode": "EMP001",
  "name": "IT Engineer Basic",
  "grade": "Basic",
  "type": "National Certificate",
  "amount": 5000.00,
  "isChecked": true,
  "certificateNumber": "FE2024001",
  "acquisitionDate": "2024-03-15",
  "qualificationTypeId": 1
}
```

#### When Editing
```json
{
  "id": 123,
  "employeeCode": "EMP001",
  "name": "IT Engineer Basic",
  "grade": "Basic",
  "type": "National Certificate",
  "amount": 5000.00,
  "isChecked": true,
  "certificateNumber": "FE2024001",
  "acquisitionDate": "2024-03-15",
  "qualificationTypeId": 1
}
```

---

## Registration Processing
### Register Button
1. Execute validation for all fields
2. If validation errors exist: Display error messages, end processing
3. When validation succeeds: Display registration confirmation dialog

### Registration Confirmation Dialog
#### Dialog Content
- Title: "Registration Confirmation"
- Message: "Do you want to register this qualification?"
- Buttons: [Cancel] [Register]

#### Registration Processing
1. Call API (same as draft save)
2. On registration success: Display success message, navigate to list screen
3. On registration failure: Display error message

---

## Various Checks

### 1. Required Field Check
Display error message for required fields if empty

### 2. Length Check
Display error message if exceeds maximum character length

### 3. Amount Check
- Check amount format
- Check value range

### 4. Date Check
- Check date format
- Check date is not in the future

### 5. Duplicate Check
- Check duplicate certificate number
- Check employee qualification already exists

---

## Completion Messages

### Success Messages
- Draft save completed: "Draft saved."
- Registration completed: "Qualification registered."

### Error Messages
- Validation error: Display error message for corresponding field
- API error: "Unable to save data."
- Duplicate error: "This certificate number is already in use."

---

## Navigation

### Back Button
- Return to list screen
- If unsaved changes exist: Display confirmation dialog

### Cancel Button
- Return to list screen
- If unsaved changes exist: Display confirmation dialog

---

## Error Handling

### API Errors
- Connection error: "Unable to connect to server."
- Authentication error: "Login required."
- Permission error: "No permission to perform this operation."

### Validation Errors
- Required field error: Change field background color and display error message
- Length error: Display error message for corresponding field
- Duplicate error: Display error message for corresponding field

---

## Data Retrieval Processing

### Data Retrieval for Edit/View Mode
**API:** `GET /api/v1/qualifications/employees/{id}`

#### Request Parameters
**GET** `/api/v1/qualifications/employees/{id}`

#### Path Parameters
| Parameter Name | Type | Required | Note |
|:--|:--|:--|:--|
| id | Int | ○ | ID of qualification to retrieve |

#### Response Processing
- On retrieval success: Set data to form
- On retrieval failure: Display error message, return to list screen

---

*This document is used for development and maintenance of the HR Management System*
