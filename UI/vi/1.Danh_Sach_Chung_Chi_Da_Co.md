# 1. Danh Sách Chứng Chỉ Đã Có

# Wireframe
![Thiết kế](https://cacoo.com/diagrams/U7E6XRzg0nfwjYh1-204B3.png)
[Xem trước](https://cacoo.com/diagrams/U7E6XRzg0nfwjYh1/204B3)

## Tổng quan
Màn hình hiển thị và quản lý danh sách chứng chỉ đã có của nhân viên. Cung cấp các chức năng tìm kiếm, lọc và in ấn thông tin chứng chỉ.

## Endpoint
`/qualification/list`

## API Endpoints
- **Employee Master API**: `/api/v1/employees`
- **Department API**: `/api/v1/departments`
- **Qualification API**: `/api/v1/qualifications`
- **Annual Leave API**: `/api/v1/annual-leave`

## Màu nền màn hình
Có thể chuyển đổi giữa "Chế độ sáng" và "Chế độ tối" bằng nút bấm

## Hiển thị ban đầu
### Hiển thị màn hình
1. Vô hiệu hóa các nút sau  
   "In màn hình phụ", "In màn hình phụ (có địa chỉ)", "In nhãn"
2. Khởi tạo điều kiện tìm kiếm
   - Bộ phận quản lý: Chưa chọn
   - Tên bộ phận: Chưa chọn
   - Tháng sinh: Chưa chọn
   - Khoảng tuổi: Chưa chọn
   - Tháng kỷ niệm cưới: Chưa chọn
   - Hiển thị người nghỉ việc: Không hiển thị người đã nghỉ việc
3. Tùy chọn hiển thị địa chỉ
   - Địa chỉ hiện tại: Đã chọn
   - Nhà gia đình: Chưa chọn
4. Hiển thị vùng danh sách chứng chỉ đã có dưới dạng trống

## 1. Dropdown Bộ phận quản lý
- **API Call**: `GET /api/v1/departments/divisions`
- Hiển thị dữ liệu lấy từ master bộ phận quản lý
- Khi được chọn, cập nhật dropdown tên bộ phận
- **Response**: Danh sách các bộ phận quản lý cấp cao

## 2. Dropdown Tên bộ phận
- **API Call**: `GET /api/v1/departments/by-division/{divisionId}`
- Hiển thị tên bộ phận liên kết với bộ phận quản lý đã chọn
- Khi bộ phận quản lý chưa được chọn, hiển thị tất cả bộ phận
- **Response**: Danh sách các bộ phận thuộc bộ phận quản lý đã chọn

## 3. Bộ lọc Tháng sinh
- Cung cấp các tùy chọn từ tháng 1 đến tháng 12
- Khi được chọn, chỉ hiển thị nhân viên sinh trong tháng đó

## 4. Bộ lọc Khoảng tuổi
- Chỉ định khoảng tuổi (ví dụ: 25-35 tuổi)
- Bật/tắt bằng checkbox
- Loại trừ nhân viên ngoài khoảng tuổi

## 5. Bộ lọc Tháng kỷ niệm cưới
- Cung cấp các tùy chọn từ tháng 1 đến tháng 12
- Khi được chọn, chỉ hiển thị nhân viên có kỷ niệm cưới trong tháng đó

## 6. Tùy chọn hiển thị người nghỉ việc
- Không hiển thị người đã nghỉ việc (lựa chọn mặc định)
- Cũng hiển thị người đã nghỉ việc
- Chỉ hiển thị người đã nghỉ việc

## 7. Nút Xóa
- Đặt lại tất cả điều kiện tìm kiếm về trạng thái ban đầu
- Trả về hiển thị danh sách để hiển thị tất cả bản ghi

## 8. Thực thi tìm kiếm
- **API Call**: `GET /api/v1/employees`
- **Query Parameters**: 
  - `divisionName`: Tên bộ phận quản lý
  - `departmentName`: Tên bộ phận
  - `isRetired`: Trạng thái nghỉ việc
  - `search`: Tìm kiếm theo tên hoặc mã nhân viên
- Lấy danh sách nhân viên dựa trên điều kiện tìm kiếm đã đặt
- Hiển thị thông tin chứng chỉ của nhân viên đã lấy

## 9. Hiển thị Danh sách chứng chỉ đã có
### Các mục hiển thị
- Mã nhân viên
- Họ tên
- Tên bằng Katakana
- Bộ phận quản lý
- Tên bộ phận
- Ngày sinh
- Tuổi
- Danh sách chứng chỉ đã có (tên chứng chỉ, cấp độ, loại, ngày đạt được, số tiền, v.v.)

### Định dạng hiển thị
- Hiển thị dưới dạng bảng
- Nhóm thông tin chứng chỉ theo nhân viên
- Hiển thị danh sách có thể cuộn

## 10. Tùy chọn hiển thị địa chỉ
### Địa chỉ hiện tại
- Khi được chọn: Hiển thị địa chỉ hiện tại
- Khi không được chọn: Ẩn địa chỉ hiện tại

### Nhà gia đình
- Khi được chọn: Hiển thị địa chỉ nhà gia đình
- Khi không được chọn: Ẩn địa chỉ nhà gia đình

## 11. Đặt hàng đồng phục
- Chuyển đến màn hình đặt hàng đồng phục cho nhân viên đã chọn
- Truyền mã nhân viên

## 12. Danh sách phụ cấp chứng chỉ
- Chuyển đến màn hình danh sách master phụ cấp chứng chỉ

## 13. Giấy phép hàn
- Chuyển đến màn hình danh sách giấy phép hàn

## 14. Đăng ký bộ phận quản lý
- Chuyển đến màn hình đăng ký bộ phận quản lý

## 15. Đăng ký tên bộ phận
- Chuyển đến màn hình đăng ký tên bộ phận

## 16. Quản lý nghỉ phép năm
- Chuyển đến màn hình quản lý nghỉ phép năm

## 17. In màn hình phụ
- In danh sách hiện đang hiển thị
- Hiển thị modal xác nhận in

## 18. In màn hình phụ (có địa chỉ)
- In danh sách bao gồm thông tin địa chỉ
- Hiển thị modal xác nhận in

## 19. In nhãn
- In nhãn cho nhân viên đã chọn
- Cần chọn nhân viên

## 20. Đăng ký danh sách nhân viên
- Chuyển đến màn hình đăng ký danh sách nhân viên

## 21. Hiển thị mục đã trích xuất
- Hiển thị số lượng mục được trích xuất với điều kiện tìm kiếm hiện tại
- Ví dụ: "Mục đã trích xuất: 25"

## 22. Hiển thị mục đã chọn
- Hiển thị số lượng nhân viên hiện đang được chọn
- Ví dụ: "Mục đã chọn: 3"

## 23. Chọn nhân viên
- Chọn nhân viên từ danh sách
- Hỗ trợ chọn nhiều
- Hiển thị trực quan trạng thái chọn

## 24. Hiển thị chi tiết chứng chỉ
- **API Call**: `GET /api/v1/employees/{employeeCode}/qualifications`
- Hiển thị thông tin chi tiết chứng chỉ của nhân viên
- Tên chứng chỉ, cấp độ, loại, ngày đạt được, số tiền, v.v.
- Thông tin chi tiết liên kết với ID chứng chỉ
- **Response**: Danh sách chứng chỉ của nhân viên đã chọn

## 25. Chức năng in
### Modal xác nhận in
- Hiển thị xác nhận bắt đầu in
- Cung cấp tùy chọn cài đặt in

### Đầu ra in
- Xuất dưới dạng PDF
- Tối ưu hóa bố cục in
- Điều chỉnh ngắt trang

## 26. Quy trình lấy dữ liệu
### Lấy danh sách nhân viên
- **API**: `GET /api/v1/employees`
- Lấy dữ liệu nhân viên dựa trên điều kiện tìm kiếm
- Hỗ trợ phân trang với `page` và `size` parameters
- Chức năng sắp xếp với `sort` parameter

### Lấy thông tin chứng chỉ
- **API**: `GET /api/v1/employees/{employeeCode}/qualifications`
- Lấy thông tin chứng chỉ của nhân viên đã chọn
- Liên kết với master phụ cấp chứng chỉ
- Hiển thị theo thứ tự ngày đạt được

### Lấy thông tin nghỉ phép năm
- **API**: `GET /api/v1/employees/{employeeCode}/annual-leave`
- Lấy chi tiết nghỉ phép năm của nhân viên
- Hỗ trợ lọc theo năm với `year` parameter

## 27. Xử lý lỗi
### Lỗi lấy dữ liệu
- Hiển thị thông báo "Không thể lấy dữ liệu"
- Cung cấp tùy chọn thử lại

### Lỗi in
- Hiển thị thông báo "In thất bại"
- Nhắc nhở kiểm tra cài đặt in

## 28. Thiết kế đáp ứng
- Điều chỉnh hiển thị theo kích thước màn hình
- Đảm bảo khả năng sử dụng trên thiết bị di động
- Tối ưu hóa hiển thị máy tính bảng

## 29. Khả năng tiếp cận
- Hỗ trợ điều hướng bằng bàn phím
- Hỗ trợ trình đọc màn hình
- Cân nhắc cho người khiếm thị màu sắc

## 30. Tối ưu hóa hiệu suất
- Hiển thị hiệu quả dữ liệu lớn
- Triển khai tải chậm
- Tận dụng chức năng cache

## 31. Tích hợp API chi tiết

### 31.1. Luồng tải dữ liệu ban đầu
1. **Tải danh sách bộ phận quản lý**
   ```javascript
   GET /api/v1/departments/divisions
   ```
2. **Tải danh sách nhân viên với bộ lọc**
   ```javascript
   GET /api/v1/employees?page=1&size=20&isRetired=false
   ```
3. **Tải thông tin chứng chỉ cho từng nhân viên**
   ```javascript
   GET /api/v1/employees/{employeeCode}/qualifications
   ```

### 31.2. Luồng tìm kiếm và lọc
1. **Khi thay đổi bộ phận quản lý**
   ```javascript
   GET /api/v1/departments/by-division/{divisionId}
   ```
2. **Khi thực hiện tìm kiếm**
   ```javascript
   GET /api/v1/employees?divisionName={name}&departmentName={name}&search={keyword}
   ```

### 31.3. Luồng in ấn
1. **Lấy dữ liệu để in**
   ```javascript
   GET /api/v1/employees/{employeeCode}/qualifications
   GET /api/v1/employees/{employeeCode}/annual-leave
   ```

### 31.4. Xử lý lỗi API
- **400 Bad Request**: Hiển thị thông báo lỗi validation
- **404 Not Found**: Hiển thị "Không tìm thấy dữ liệu"
- **500 Internal Server Error**: Hiển thị "Lỗi hệ thống, vui lòng thử lại"

### 31.5. Caching Strategy
- Cache danh sách bộ phận quản lý (ít thay đổi)
- Cache danh sách bộ phận theo bộ phận quản lý
- Cache thông tin nhân viên trong 5 phút
- Cache thông tin chứng chỉ trong 10 phút

---

*Tài liệu này được sử dụng cho phát triển và bảo trì hệ thống quản lý nhân viên*
