# Tài liệu Đặc tả Màn hình Đặt Hàng Đồng Phục
**Phiên bản:** v0.1  
**Ngày cập nhật:** 2025-10-25  
**Người biên soạn:** Chính  
**Người kiểm duyệt:** [PM/Leader Name]  
**Hệ thống:** Quản lý Nhân sự  

---

## 1. Tổng quan
Màn hình hiển thị và quản lý đơn đặt hàng đồng phục của nhân viên.  
Cung cấp chức năng tìm kiếm, hiển thị và quản lý đơn đặt hàng đồng phục.

- **Endpoint màn hình:** `/work-uniform/orders`
- **Màu nền:** Xanh lá nhạt (#90EE90), khu vực hiển thị chính màu trắng

## Wireframe
![Màn hình Đặt Hàng Đồng Phục](Work_Uniform_Order_UI.png)

---

## 2. API Endpoints
| Tên API | Endpoint | Mục đích |
|----------|-----------|-----------|
| Work Uniform Order | `/api/v1/work-uniform-orders` | CRUD đơn đặt hàng đồng phục |
| Employee Master | `/api/v1/employees` | Lấy thông tin nhân viên |
| Department | `/api/v1/departments` | Lấy danh sách phòng ban |
| Item Master | `/api/v1/items` | Lấy danh sách sản phẩm đồng phục |

---

## 3. Hiển thị ban đầu
1. Hiển thị danh sách đơn đặt hàng đồng phục với phân trang
2. Thiết lập điều kiện tìm kiếm mặc định:
   - Phòng ban giám sát: Chưa chọn
   - Tên phòng ban: Chưa chọn
   - Tên nhân viên: Chưa chọn
3. Hiển thị thông tin: Mã đơn hàng, Phòng ban, Tên nhân viên, Ngày đặt hàng, Ngày giao hàng
4. Record hiện tại: 1 of 5989 (có thể cuộn qua các record)

---

## 4. Bộ lọc Tìm kiếm

### 4.1. Phòng ban Giám sát
- **API:** `GET /api/v1/departments/divisions`  
- **Mục đích:** Lấy danh sách phòng ban giám sát  
- **Response:** `Array<Division>`

```typescript
interface Division {
  divisionId: number;
  divisionName: string;
}
```

### 4.2. Tên Phòng ban
- **API:** `GET /api/v1/departments/by-division/{divisionId}`

```typescript
interface Department {
  departmentId: number;
  departmentName: string;
  divisionId: number;
}
```

### 4.3. Tên Nhân viên
- **Loại:** Text input với autocomplete
- **Mục đích:** Tìm kiếm theo tên nhân viên
- **API:** `GET /api/v1/employees?search={name}`

---

## 5. Thực thi Tìm kiếm
**API:** `GET /api/v1/work-uniform-orders`

```typescript
interface WorkUniformOrderSearchParams {
  divisionName?: string;
  departmentName?: string;
  employeeName?: string;
  orderDateFrom?: string;
  orderDateTo?: string;
  deliveryDateFrom?: string;
  deliveryDateTo?: string;
  page?: number;
  size?: number;
  sort?: string;
}
```

- Hiển thị danh sách đơn đặt hàng dạng bảng
- Có phân trang, cuộn, sắp xếp và chọn nhiều

---

## 6. Hiển thị Danh sách Đơn Đặt Hàng

### 6.1. Cấu trúc bảng
- **コート (Mã đơn hàng):** Mã định danh duy nhất của đơn đặt hàng
- **部門名 (Tên phòng ban):** Tên phòng ban giám sát
- **部署名 (Tên bộ phận):** Tên bộ phận cụ thể
- **氏名 (Tên nhân viên):** Họ tên nhân viên đặt hàng
- **注文日 (Ngày đặt hàng):** Ngày tạo đơn đặt hàng (YYYY/MM/DD)
- **納入日 (Ngày giao hàng):** Ngày dự kiến giao hàng (YYYY/MM/DD)

### 6.2. Dữ liệu hiển thị
```typescript
interface WorkUniformOrder {
  orderCode: string;
  divisionName: string;
  departmentName: string;
  employeeName: string;
  orderDate: string;
  deliveryDate?: string;
  status: 'pending' | 'confirmed' | 'delivered' | 'cancelled';
  totalAmount: number;
  items: WorkUniformItem[];
  createdAt: string;
  updatedAt: string;
}

interface WorkUniformItem {
  itemCode: string;
  itemName: string;
  size: string;
  color: string;
  quantity: number;
  unitPrice: number;
  totalPrice: number;
}
```

---

## 7. Chức năng Nghiệp vụ

### 7.1. Điều hướng Record
- **First Record:** Chuyển đến record đầu tiên
- **Previous Record:** Chuyển đến record trước đó
- **Next Record:** Chuyển đến record tiếp theo
- **Last Record:** Chuyển đến record cuối cùng
- **Record Counter:** Hiển thị "Record: X of Y"

### 7.2. Tìm kiếm và Lọc
- **Search Input:** Tìm kiếm nhanh trong danh sách
- **No Filter:** Xóa tất cả bộ lọc
- **Filter Dropdowns:** Lọc theo phòng ban và tên nhân viên

### 7.3. Quản lý Đơn Hàng
1. **品目マスター (Item Master):** Quản lý danh mục sản phẩm đồng phục
2. **作業服注文登録 (Work Uniform Order Registration):** Tạo đơn đặt hàng mới

---

## 8. Luồng thao tác người dùng

### 8.1. Xem danh sách đơn hàng
1. Mở màn hình → hiển thị danh sách đơn đặt hàng
2. Sử dụng điều hướng record để xem các đơn hàng
3. Sử dụng bộ lọc để tìm kiếm đơn hàng cụ thể

### 8.2. Tạo đơn đặt hàng mới
1. Nhấn "作業服注文登録" → chuyển màn hình tạo đơn hàng
2. Chọn nhân viên và sản phẩm đồng phục
3. Nhập thông tin đơn hàng và lưu

### 8.3. Quản lý sản phẩm
1. Nhấn "品目マスター" → chuyển màn hình quản lý sản phẩm
2. Thêm/sửa/xóa sản phẩm đồng phục

---

## 9. API Endpoints Chi tiết

### 9.1. Lấy danh sách đơn đặt hàng
- **API Call:** `GET /api/v1/work-uniform-orders`
- **Response Data Type:**
```typescript
interface WorkUniformOrderListResponse {
  success: true;
  data: WorkUniformOrder[];
  message: "Lấy danh sách đơn đặt hàng đồng phục thành công";
  pagination: {
    page: number;
    size: number;
    totalElements: number;
    totalPages: number;
    hasNext: boolean;
    hasPrevious: boolean;
  };
}
```

### 9.2. Tạo đơn đặt hàng mới
- **API Call:** `POST /api/v1/work-uniform-orders`
- **Request Data Type:**
```typescript
interface CreateWorkUniformOrderRequest {
  employeeCode: string;
  orderDate: string;
  deliveryDate?: string;
  items: {
    itemCode: string;
    size: string;
    color: string;
    quantity: number;
  }[];
  remarks?: string;
}
```

### 9.3. Cập nhật đơn đặt hàng
- **API Call:** `PUT /api/v1/work-uniform-orders/{orderCode}`
- **Request Data Type:**
```typescript
interface UpdateWorkUniformOrderRequest {
  deliveryDate?: string;
  status: 'pending' | 'confirmed' | 'delivered' | 'cancelled';
  items: {
    itemCode: string;
    size: string;
    color: string;
    quantity: number;
  }[];
  remarks?: string;
}
```

### 9.4. Lấy danh sách sản phẩm
- **API Call:** `GET /api/v1/items`
- **Response Data Type:**
```typescript
interface Item {
  itemCode: string;
  itemName: string;
  category: string;
  availableSizes: string[];
  availableColors: string[];
  unitPrice: number;
  isActive: boolean;
}
```

---

## 10. Xử lý Lỗi
| Mã lỗi | Nguyên nhân | Hiển thị |
|--------|--------------|-----------|
| 400 | Dữ liệu không hợp lệ | "Dữ liệu nhập không hợp lệ" |
| 404 | Không tìm thấy đơn hàng | "Không tìm thấy đơn đặt hàng" |
| 409 | Đơn hàng đã tồn tại | "Mã đơn hàng đã tồn tại" |
| 500 | Lỗi hệ thống | "Lỗi hệ thống. Vui lòng thử lại" |

---

## 11. Thiết kế Đáp ứng & Truy cập
- Tự co giãn theo độ rộng màn hình
- Hỗ trợ điều hướng bàn phím, trình đọc màn hình
- Màu sắc đảm bảo người khiếm thị màu có thể phân biệt
- Scrollbar cho danh sách dài

---

## 12. Tối ưu hóa Hiệu suất & Cache
- Cache danh sách phòng ban giám sát (ít thay đổi)
- Cache danh sách sản phẩm trong 1 giờ
- Hỗ trợ tải chậm và phân trang hiệu quả
- Lazy loading cho danh sách đơn hàng

---

## 13. Môi trường & Yêu cầu Kỹ thuật
| Hạng mục | Giá trị |
|----------|---------|
| Framework | React + TypeScript |
| CSS | TailwindCSS |
| Trình duyệt hỗ trợ | Chrome 120+, Edge 120+ |
| Ngôn ngữ | Tiếng Việt (UTF-8) |

---

## 14. Kiểm thử và Xác nhận
| Hạng mục | Điều kiện | Kết quả mong đợi |
|-----------|------------|-----------------|
| Tìm kiếm theo phòng ban | Chọn phòng ban cụ thể | Hiển thị đúng đơn hàng của phòng ban |
| Tìm kiếm theo tên nhân viên | Nhập tên nhân viên | Hiển thị đơn hàng của nhân viên đó |
| Điều hướng record | Nhấn Previous/Next | Chuyển đúng record |
| Tạo đơn hàng mới | Nhập đầy đủ thông tin | Tạo thành công và hiển thị trong danh sách |

---

*Tài liệu này được sử dụng cho phát triển và bảo trì Hệ thống Quản lý Nhân viên (HR Management System)*
