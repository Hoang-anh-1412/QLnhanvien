# Tài liệu Đặc tả Màn hình Danh Sách Nhân Viên
**Phiên bản:** v0.1  
**Ngày cập nhật:** 2025-10-25  
**Người biên soạn:** Chính  
**Người kiểm duyệt:** [PM/Leader Name]  
**Hệ thống:** Quản lý Nhân sự  

---

## 1. Tổng quan
Màn hình hiển thị và quản lý thông tin cơ bản của nhân viên.  
Cung cấp chức năng tìm kiếm, hiển thị và in ấn thông tin nhân viên.

- **Endpoint màn hình:** `/employee/roster`
- **Màu nền:** Tím (#8B5CF6), khu vực hiển thị chính màu trắng

## Wireframe
![Màn hình Danh sách Nhân viên](Employee_Roster_UI.png)

---

## 2. API Endpoints
| Tên API | Endpoint | Mục đích |
|----------|-----------|-----------|
| Employee Master | `/api/v1/employees` | Lấy danh sách nhân viên |
| Department | `/api/v1/departments` | Lấy danh sách phòng ban |
| Qualification | `/api/v1/qualifications` | Lấy danh sách chứng chỉ |
| Annual Leave | `/api/v1/annual-leaves` | Lấy thông tin nghỉ phép năm |

---

## 3. Hiển thị ban đầu
1. Vô hiệu hóa các nút: "In màn hình con", "In màn hình con (có địa chỉ)", "In nhãn"  
2. Thiết lập điều kiện tìm kiếm mặc định:
   - Phòng ban giám sát: Chưa chọn  
   - Tên phòng ban: Chưa chọn  
   - Tháng sinh: Chưa chọn  
   - Khoảng tuổi: Chưa chọn  
   - Tháng kỷ niệm cưới: Chưa chọn  
   - Hiển thị nhân viên nghỉ việc: Không hiển thị  
3. Tùy chọn hiển thị địa chỉ:
   - Địa chỉ hiện tại: Đã chọn  
   - Nhà gia đình: Chưa chọn  
4. Khu vực danh sách nhân viên: Trống

---

## 4. Bộ lọc Tìm kiếm
### 4.1. Phòng ban Giám sát
- **API:** `GET /api/v1/departments/divisions`  
- **Mục đích:** Lấy danh sách phòng ban giám sát  
- **Response:** `Array<Division>`

```typescript
interface Division {
  divisionId: number;
  divisionName: string;
}
```

### 4.2. Tên Phòng ban
- **API:** `GET /api/v1/departments/by-division/{divisionId}`

```typescript
interface Department {
  departmentId: number;
  departmentName: string;
  divisionId: number;
}
```

### 4.3. Bộ lọc Tháng Sinh / Tháng Kỷ niệm Cưới
- Cung cấp tùy chọn từ tháng 1–12  
- Hiển thị nhân viên có tháng tương ứng được chọn

### 4.4. Bộ lọc Khoảng Tuổi
- Cho phép bật/tắt qua checkbox  
- Chỉ hiển thị nhân viên trong khoảng tuổi đã chọn

### 4.5. Hiển thị Nhân viên Nghỉ việc
```typescript
type RetirementStatus = 'active' | 'retired' | 'all';
```
- `active`: Không hiển thị nhân viên nghỉ việc  
- `all`: Hiển thị tất cả  
- `retired`: Chỉ hiển thị nhân viên nghỉ việc

---

## 5. Thực thi Tìm kiếm
**API:** `GET /api/v1/employees`

```typescript
interface EmployeeSearchParams {
  divisionName?: string;
  departmentName?: string;
  isRetired?: boolean;
  search?: string;
  page?: number;
  size?: number;
  sort?: string;
  birthMonth?: number;
  ageFrom?: number;
  ageTo?: number;
  ageFilterEnabled?: boolean;
  weddingAnniversaryMonth?: number;
  retirementStatus?: 'active' | 'all' | 'retired';
}
```

- Hiển thị danh sách nhân viên dạng bảng  
- Có phân trang, cuộn, sắp xếp và chọn nhiều

---

## 6. Chức năng Nghiệp vụ
1. **Đặt hàng Đồng phục:** Chuyển màn hình đặt hàng, truyền `employeeCode`  
2. **Danh sách Phụ cấp Chứng chỉ:** Chuyển sang màn hình tương ứng  
3. **Giấy phép Hàn:** Chuyển sang danh sách giấy phép hàn  
4. **Đăng ký Phòng ban / Tên Phòng ban:** Chuyển đến trang đăng ký  
5. **Quản lý Nghỉ phép Năm:** Gọi `/api/v1/employees/{employeeCode}/annual-leave`  
6. **In Danh sách:** Xuất PDF, xác nhận bằng hộp thoại trước khi in  
7. **In Nhãn:** Bắt buộc chọn ≥1 nhân viên, nếu không hiển thị cảnh báo  

---

## 7. Luồng thao tác người dùng
1. Mở màn hình → khởi tạo bộ lọc mặc định  
2. Chọn Phòng ban Giám sát → cập nhật Tên phòng ban  
3. Thiết lập điều kiện tìm kiếm khác → nhấn "Tìm kiếm"  
4. Hệ thống hiển thị danh sách nhân viên  
5. Người dùng chọn nhân viên để:
   - In danh sách / in nhãn  
   - Xem thông tin nghỉ phép năm  
   - Chuyển sang các màn hình liên quan

---

## 8. Xử lý Lỗi
| Mã lỗi | Nguyên nhân | Hiển thị |
|--------|--------------|-----------|
| 400 | Dữ liệu không hợp lệ | "Dữ liệu nhập không hợp lệ" |
| 404 | Không tìm thấy dữ liệu | "Không tìm thấy dữ liệu" |
| 500 | Lỗi hệ thống | "Lỗi hệ thống. Vui lòng thử lại" |

---

## 9. Thiết kế Đáp ứng & Truy cập
- Tự co giãn theo độ rộng màn hình  
- Hỗ trợ điều hướng bàn phím, trình đọc màn hình  
- Màu sắc đảm bảo người khiếm thị màu có thể phân biệt  

---

## 10. Tối ưu hóa Hiệu suất & Cache
- Cache danh sách phòng ban giám sát (ít thay đổi)  
- Cache nhân viên trong 5 phút  
- Hỗ trợ tải chậm và phân trang hiệu quả  

---

## 11. Môi trường & Yêu cầu Kỹ thuật
| Hạng mục | Giá trị |
|----------|---------|
| Framework | React + TypeScript |
| CSS | TailwindCSS |
| Trình duyệt hỗ trợ | Chrome 120+, Edge 120+ |
| Ngôn ngữ | Tiếng Việt (UTF-8) |

---

## 12. Kiểm thử và Xác nhận
| Hạng mục | Điều kiện | Kết quả mong đợi |
|-----------|------------|-----------------|
| Tìm kiếm theo tháng sinh | Chọn Tháng 5 | Hiển thị đúng nhân viên sinh tháng 5 |
| Bộ lọc tuổi | 25–35 | Loại trừ ngoài khoảng |
| In nhãn khi chưa chọn | Không chọn nhân viên | Cảnh báo hiển thị |
| Cache phòng ban | Mở lại màn hình trong 5 phút | Dữ liệu phòng ban được tải từ cache |

---

*Tài liệu này được sử dụng cho phát triển và bảo trì Hệ thống Quản lý Nhân viên (HR Management System)*
