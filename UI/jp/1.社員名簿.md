# 1. 社員名簿

## ワイヤーフレーム
![社員名簿画面](Employee_Roster_UI.png)

## 概要
社員の基本情報を一覧表示・管理する画面です。社員情報の検索、表示、印刷機能を提供します。

## エンドポイント
`/employee/roster`

## API エンドポイント
- **Employee Master API**: `/api/v1/employees`
- **Department API**: `/api/v1/departments`
- **Qualification API**: `/api/v1/qualifications`
- **Annual Leave API**: `/api/v1/annual-leaves`

## 画面背景色
紫色の背景（#8B5CF6）に白いメイン表示エリア

## 初期表示
### 画面表示
1. 以下のボタンを無効(disable)にする  
   「サブ画面印刷」、「サブ画面印刷 (住所付)」、「ラベル印刷」
2. 検索条件の初期化
   - 統括部門：未選択
   - 部署名：未選択
   - 誕生月：未選択
   - 年齢範囲：未選択
   - 結婚記念月：未選択
   - 退職者表示：退職者は表示しない
3. 住所表示オプション
   - 現住所：チェック済み
   - 実家：未チェック
4. 社員名簿の表示エリアを空で表示

## 1. 統括部門プルダウン
- **API Call**: `GET /api/v1/departments/divisions`
- 統括部門マスタから取得したデータを表示
- 選択時、部署名プルダウンを更新
- **Response**: 統括部門一覧

## 2. 部署名プルダウン
- **API Call**: `GET /api/v1/departments/by-division/{divisionId}`
- 選択された統括部門に紐づく部署名を表示
- 統括部門未選択時は全部署を表示
- **Response**: 選択された統括部門に属する部署一覧

## 3. 誕生月フィルター
- 1月～12月の選択肢を提供
- 選択時、該当月生まれの社員のみを表示

## 4. 年齢範囲フィルター
- 年齢の範囲指定（例：25歳～35歳）
- チェックボックスで有効/無効を切り替え
- 範囲外の年齢の社員を除外

## 5. 結婚記念月フィルター
- 1月～12月の選択肢を提供
- 選択時、該当月に結婚記念日がある社員のみを表示

## 6. 退職者表示オプション
- 退職者は表示しない（デフォルト選択）
- 退職者も表示
- 退職者のみ表示

## 7. クリアボタン
- 全ての検索条件を初期状態にリセット
- 一覧表示を全件表示に戻す

## 8. 検索実行
- **API Call**: `GET /api/v1/employees`
- **Query Parameters**: 
  - `divisionName`: 統括部門名
  - `departmentName`: 部署名
  - `isRetired`: 退職状況
  - `search`: 氏名または社員コードで検索
- 設定された検索条件に基づいて社員一覧を取得
- 取得した社員の基本情報を表示

## 9. 社員名簿表示
### 表示項目
- 社員コード
- 氏名
- かな氏名
- 統括部門
- 部署名
- 生年月日
- 年齢
- 現住所（オプション）
- 実家住所（オプション）

### 表示形式
- テーブル形式で表示
- スクロール可能な一覧表示
- 紫色背景の白い表示エリア

## 10. 住所表示オプション
### 現住所
- チェック時：現住所を表示
- 未チェック時：現住所を非表示

### 実家
- チェック時：実家住所を表示
- 未チェック時：実家住所を非表示

## 11. 作業服注文
- 選択された社員の作業服注文画面へ遷移
- 社員コードを引き継ぐ

## 12. 資格手当一覧
- 資格手当マスタ一覧画面へ遷移

## 13. 溶接免許
- 溶接免許一覧画面へ遷移

## 14. 統括部門登録
- 統括部門登録画面へ遷移

## 15. 部署名登録
- 部署名登録画面へ遷移

## 16. 年休管理
- 年休管理画面へ遷移

## 17. サブ画面印刷
- 現在表示されている一覧を印刷
- 印刷確認モーダルを表示

## 18. サブ画面印刷 (住所付)
- 住所情報を含めて一覧を印刷
- 印刷確認モーダルを表示

## 19. ラベル印刷
- 選択された社員のラベル印刷
- 社員選択が必要

## 20. 社員名簿登録
- 社員名簿登録画面へ遷移

## 21. 抽出項目表示
- 現在の検索条件で抽出された項目数を表示
- 例：「抽出項目：25件」

## 22. 選択項目表示
- 現在選択されている社員数を表示
- 例：「選択項目：3件」

## 23. 社員選択
- 一覧から社員を選択可能
- 複数選択対応
- 選択状態の視覚的表示

## 24. 印刷機能
### 印刷確認モーダル
- 印刷開始確認を表示
- 印刷設定オプションを提供

### 印刷出力
- PDF形式で出力
- 印刷レイアウトの最適化
- ページ区切りの調整

## 25. データ取得処理
### 社員一覧取得
- **API**: `GET /api/v1/employees`
- 検索条件に基づいて社員データを取得
- ページネーション対応（`page`と`size`パラメータ）
- ソート機能（`sort`パラメータ）

### 年休情報取得
- **API**: `GET /api/v1/employees/{employeeCode}/annual-leave`
- 社員の年休詳細を取得
- `year`パラメータで年フィルタ対応

## 26. エラーハンドリング
### データ取得エラー
- 「データの取得に失敗しました」のメッセージ表示
- 再試行オプションの提供

### 印刷エラー
- 「印刷に失敗しました」のメッセージ表示
- 印刷設定の確認を促す

## 27. レスポンシブ対応
- 画面サイズに応じた表示調整
- モバイル端末での操作性確保
- タブレット表示の最適化

## 28. アクセシビリティ
- キーボードナビゲーション対応
- スクリーンリーダー対応
- 色覚異常者への配慮

## 29. パフォーマンス最適化
- 大量データの効率的な表示
- 遅延読み込みの実装
- キャッシュ機能の活用

## 30. 詳細API統合

### 30.1. 初期データ読み込みフロー
1. **統括部門一覧の読み込み**
   ```javascript
   GET /api/v1/departments/divisions
   ```
2. **フィルタ付き社員一覧の読み込み**
   ```javascript
   GET /api/v1/employees?page=1&size=20&isRetired=false
   ```

### 30.2. 検索・フィルタフロー
1. **統括部門変更時**
   ```javascript
   GET /api/v1/departments/by-division/{divisionId}
   ```
2. **検索実行時**
   ```javascript
   GET /api/v1/employees?divisionName={name}&departmentName={name}&search={keyword}
   ```

### 30.3. 印刷フロー
1. **印刷用データ取得**
   ```javascript
   GET /api/v1/employees/{employeeCode}/annual-leave
   ```

### 30.4. APIエラーハンドリング
- **400 Bad Request**: バリデーションエラーメッセージ表示
- **404 Not Found**: 「データが見つかりません」表示
- **500 Internal Server Error**: 「システムエラーです。再試行してください」表示

### 30.5. キャッシュ戦略
- 統括部門一覧のキャッシュ（変更頻度低）
- 統括部門別部署のキャッシュ
- 社員情報を5分間キャッシュ

---

*このドキュメントは社員管理システムの開発・保守に使用されます*
